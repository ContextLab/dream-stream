# Session Notes - January 10, 2026

## Project: DreamStream

### Overview
Created foundational documentation for a cross-platform lucid dreaming app that:
- Delivers audio "dream prompts" during optimal sleep stages
- Integrates with fitness/sleep trackers (WearOS, watchOS, Fitbit, Garmin, Oura)
- Uses AI to generate soothing TTS + ambient music
- Allows users to record dreams and transform them into new prompts via LLM

### Files Created
1. **README.md** - Comprehensive project overview
   - Platform support matrix (Web, Android, iOS, WearOS, watchOS, macOS, Windows, Linux)
   - Technical architecture (KMP + Compose Multiplatform)
   - Sleep tracking integration details
   - Audio generation pipeline
   - Project structure

2. **docs/USER_STORIES.md** - Detailed user personas and stories
   - 5 personas (Maya, David, Sofia, James, Aisha)
   - 10 epics covering full user journey
   - 30+ user stories with acceptance criteria
   - Non-functional requirements
   - Priority matrix (P0-P3)

3. **docs/IMPLEMENTATION_PLAN.md** - Phased development roadmap
   - 6 phases over 12-18 months
   - Sprint-level breakdown with deliverables
   - Code samples for key components
   - Architecture diagrams
   - Risk mitigation strategies
   - Resource requirements and cost estimates

### Key Technical Decisions
- **Framework**: Kotlin Multiplatform (KMP) chosen over Flutter/React Native for native WearOS performance
- **Sleep Detection**: Local HRV-based classification on wearable for low latency
- **TTS**: ElevenLabs primary, Kokoro-82M fallback
- **Music**: Mubert API for procedural ambient generation
- **Backend**: Supabase (PostgreSQL, Auth, Storage)
- **Audio Mixing**: FFmpeg with sidechain compression

### Research Findings (from Librarian agents)

#### Sleep Tracking APIs
- WearOS Health Services provides best real-time capability via local HRV analysis
- Most consumer APIs (Fitbit, Oura) are batch-only (post-sync)
- Asleep.ai offers 5-minute interval audio-based detection without wearable

#### Audio Generation
- ElevenLabs has "Sleep Specialist" voice preset
- Amazon Polly supports true whispered speech via SSML
- Mubert provides infinite procedural ambient music
- Binaural beats can be generated locally (simple sine waves)

#### Cross-Platform Frameworks
- KMP + Compose Multiplatform recommended for ~80% code sharing
- WearOS requires native foreground services for 8-hour reliability
- Flutter viable but requires more WearOS optimization

### Next Steps (when resuming)
1. Initialize KMP project structure
2. Set up Gradle multi-module build
3. Create domain models in shared module
4. Prototype WearOS heart rate monitoring

### Dependencies to Research Further
- Health Services API permissions and Play Store requirements
- ElevenLabs pricing for production scale
- Voice cloning consent requirements
- App Store guidelines for sleep/health apps
